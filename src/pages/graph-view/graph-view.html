<!--
  Generated template for the GraphViewPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title *ngIf="region == undefined && product == undefined && user == undefined && teamObjet == undefined">{{'pop.graph_title' | translate}}</ion-title>
    <ion-title *ngIf="region != undefined">{{region}}</ion-title>
    <ion-title *ngIf="user != undefined">{{user.user.name}}</ion-title>
    <ion-title *ngIf="teamObjet != undefined">{{teamObjet.team.name}}</ion-title>
    <ion-title *ngIf="product != undefined">{{product.name}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <div *ngIf="type == 'region'">

    <div class="bloc-team">
      <div class="bloc-btn">
        <ion-grid no-padding>
              <ion-row no-padding>
                <ion-col col-3 no-padding> <button *ngIf="index > 0" ion-button icon-only class="btn-left" (click)="onPrevTeam()">
                    <ion-icon name="ios-arrow-back-outline"></ion-icon>
                  </button>
                </ion-col>
                <ion-col col-6 no-padding>
                    <p>{{currentTeam?.team?.name}}</p>
                    
                </ion-col>
                <ion-col col-3 no-padding >
                  <button *ngIf="index < teams.length-1" ion-button icon-only class="btn-right" (click)="onNextTeam()">
                        <ion-icon name="ios-arrow-forward-outline"></ion-icon>
                      </button>
                    </ion-col>
              </ion-row>
            </ion-grid>
            
            
          </div>
          <canvas id="barchart-canvas-large" #teamCanvas></canvas>
        </div>
        
      <ion-item-divider text-uppercase>{{'pop.graph.details' | translate}}</ion-item-divider>

      <div padding class="info-bloc">
        <h3 id="team_name">{{currentTeam?.team?.name}}</h3>

        <h5 id="total">Total : {{currentTeam?.total | currency:current_user?.currency_id?.name:'symbol':'':current_lang}}</h5>

        <div *ngIf="currentTeam?.users.length > 0">
            <ion-list no-padding>
                <ion-item (click)="viewCommTO(item)" transparent *ngFor="let item of currentTeam.users">
                  <ion-avatar item-start>
                      <op-lazy-img [source]="item.user.image_url" [defaultImage]="defaultImg"></op-lazy-img>
                    </ion-avatar>
                  <strong><h2>{{item?.user.display_name}}</h2></strong>
                  <h4 id="user_tot">{{item.total | currency:current_user?.currency_id?.name:'symbol':'':current_lang}}</h4>
                </ion-item>
              </ion-list>
              
          </div>
          
        </div>
        
      </div>
      <div *ngIf="type == 'user'">
        <div class="bloc-team">
        <canvas id="barchart-canvas-large" #teamCanvas></canvas>
      </div>
      
      
      <ion-item-divider text-uppercase>{{'pop.graph.details' | translate}}</ion-item-divider>
        <div padding class="info-bloc">
          <h3 id="team_name">{{user?.user.name}}</h3>
          
          <h5 id="total">Total : {{user?.total | currency:current_user?.currency_id?.name:'symbol':'':current_lang}}</h5>
        </div>
      </div>
      <div *ngIf="type == 'team'">
        <div class="bloc-team">
          <canvas id="barchart-canvas-large" #teamCanvas></canvas>
        </div>
        
        
        <ion-item-divider text-uppercase>{{'pop.graph.details' | translate}}</ion-item-divider>
        <div padding class="info-bloc">
          <h3 id="team_name">{{teamObjet?.team.name}}</h3>
        
        <!-- <h5 id="total">Total : {{user?.total | currency:current_user?.currency_id?.name:'symbol':'':current_lang}}</h5> -->
      </div>
      </div>
      </ion-content>
      